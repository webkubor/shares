import{r as _,k as v,A as T,K as i,P as b,R as k,L as d,N as g,s as w,J as M,M as y,B as V,X as $}from"./vendor-DvKkXVKX.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={name:"ToastMessage",inheritAttrs:!1,props:{modelValue:{type:Boolean,default:()=>!1},showProgress:{type:Boolean,default:()=>!0},content:{type:String,default:()=>""},time:{type:Number,default:()=>3e3},destroy:{type:Function,default:()=>{}},type:{type:String,default:()=>"success",validator(e){return["success","warning","error"].includes(e)}}},emits:["update:modelValue"],setup(e,{emit:t}){let s=null;const n=_(100),r=e.time||5e3;function c(){t("update:modelValue",!1),e.destroy()}v(()=>{o()}),T(()=>{clearTimeout(s),e.modelValue&&(s=setTimeout(()=>{c()},e.time))});const o=()=>{const f=setInterval(()=>{n.value-=100/r*1e3,n.value<=0&&clearInterval(f)},1e3)};return{progress:n,onClose:c}}},C={key:0,class:"toast-message"},A={class:"toast-message-main"},E=["innerHTML"],N={key:1,class:"toast-message-content"},P={key:2,class:"progress-bar-container"};function S(e,t,s,n,r,c){return i(),b(V,{name:"slide-fade"},{default:k(()=>[s.modelValue?(i(),d("div",C,[g("main",A,[s.content?(i(),d("section",{key:0,class:"toast-message-content",innerHTML:s.content},null,8,E)):(i(),d("section",N,[w(e.$slots,"default",{},void 0,!0)])),s.showProgress?(i(),d("div",P,[g("div",{class:"progress-bar",style:M({width:`${n.progress}%`,backgroundColor:"red"})},null,4)])):y("",!0)])])):y("",!0)]),_:3})}const I=x(B,[["render",S],["__scopeId","data-v-1587a0eb"]]);let a=[];const m=10;function l(e){const t=document.createElement("div"),s=`message-${a.length}`;document.body.appendChild(t),typeof e=="object"?e={modelValue:!0,...e}:e={modelValue:!0,content:e};const n=$(I,{destroy:()=>{a=a.slice(1);const o=t.firstElementChild;o&&(o.style.transform=`translateX(${2*m}px)`,o.style.opacity="0",setTimeout(()=>{n.unmount(t),document.body.contains(t)&&document.body.removeChild(t)},300))},...e}),r=n.mount(t);r.$el.setAttribute("id",s),setTimeout(()=>{r.$el.style.marginTop=`${m}px`}),a.length>0&&c(a.length),a.push(r.$el);function c(o){for(let u=0;u<o;u++){const p=a[u],h=115*(o-u)+m;setTimeout(()=>{p.style.marginTop=`${h}px`})}}}l.success=function(e){l({type:"success",content:e})};l.warning=function(e){l({type:"warning",content:e})};l.error=function(e){l({type:"error",content:e})};export{l as M};
