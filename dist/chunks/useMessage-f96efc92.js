import{au as e,f as t,G as s,H as n,o,c as a,aB as l,ax as r,aC as c,aP as u,ae as i,aF as d,ab as m,aQ as p,aR as y}from"../assets/index-648af22d.js";const g={name:"ToastMessage",inheritAttrs:!1,props:{modelValue:{type:Boolean,default:()=>!1},showProgress:{type:Boolean,default:()=>!0},content:{type:String,default:()=>""},time:{type:Number,default:()=>3e3},destroy:{type:Function,default:()=>{}},type:{type:String,default:()=>"success",validator:e=>["success","warning","error"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:o}){let a=null;const l=t(100),r=e.time||5e3;function c(){o("update:modelValue",!1),e.destroy()}s((()=>{u()})),n((()=>{clearTimeout(a),e.modelValue&&(a=setTimeout((()=>{c()}),e.time))}));const u=()=>{const e=setInterval((()=>{l.value-=100/r*1e3,l.value<=0&&clearInterval(e)}),1e3)};return{progress:l,onClose:c}}},f={key:0,class:"toast-message"},v={class:"toast-message-main"},b=["innerHTML"],h={key:1,class:"toast-message-content"},T={key:2,class:"progress-bar-container"};const V=e(g,[["render",function(e,t,s,n,p,y){return o(),a(m,{name:"slide-fade"},{default:l((()=>[s.modelValue?(o(),r("div",f,[c("main",v,[s.content?(o(),r("section",{key:0,class:"toast-message-content",innerHTML:s.content},null,8,b)):(o(),r("section",h,[u(e.$slots,"default",{},void 0,!0)])),s.showProgress?(o(),r("div",T,[c("div",{class:"progress-bar",style:i({width:`${n.progress}%`,backgroundColor:"red"})},null,4)])):d("",!0)])])):d("",!0)])),_:3})}],["__scopeId","data-v-1587a0eb"]]);let $=[];function w(e){const t=document.createElement("div"),s=`message-${$.length}`;document.body.appendChild(t),e="object"==typeof e?{modelValue:!0,...e}:{modelValue:!0,content:e};const n=p(V,{destroy:()=>{$=$.slice(1);const e=t.firstElementChild;e&&(e.style.transform="translateX(20px)",e.style.opacity="0",setTimeout((()=>{n.unmount(t),document.body.contains(t)&&document.body.removeChild(t)}),300))},...e}),o=n.use(y).mount(t);o.$el.setAttribute("id",s),setTimeout((()=>{o.$el.style.marginTop="10px"})),$.length>0&&function(e){const t=100,s=15;for(let n=0;n<e;n++){const o=$[n],a=(t+s)*(e-n)+10;setTimeout((()=>{o.style.marginTop=`${a}px`}))}}($.length),$.push(o.$el)}w.success=function(e){w({type:"success",content:e})},w.warning=function(e){w({type:"warning",content:e})},w.error=function(e){w({type:"error",content:e})};export{w as M};
